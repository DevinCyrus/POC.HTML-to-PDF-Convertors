<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>FinOps Monthly Cost Report</title>
  <style>
    :root{
      --bg:#ffffff;
      --ink:#1f2937;
      --muted:#6b7280;
      --brand:#2563eb;
      --accent:#10b981;
      --warn:#f59e0b;
      --danger:#ef4444;
      --box:#f3f4f6;
      --border:#e5e7eb;
    }
    *{box-sizing:border-box;}
    html,body{margin:0;padding:0;background:var(--bg);color:var(--ink);font:14px/1.5 -apple-system,BlinkMacSystemFont,"Segoe UI",Roboto,Inter,Ubuntu,"Helvetica Neue",Arial,"Noto Sans",sans-serif;}
    h1,h2,h3{margin:0 0 .35rem 0;line-height:1.2}
    h1{font-size:28px}
    h2{font-size:20px;margin-top:1.25rem}
    h3{font-size:16px;margin-top:1rem}
    p{margin:.5rem 0;color:var(--ink)}
    .container{max-width:960px;margin:0 auto;padding:28px 28px 48px}
    .cover{display:flex;flex-direction:column;gap:16px;padding:48px 0;border-bottom:1px solid var(--border)}
    .brand{font-weight:700;color:var(--brand);letter-spacing:.3px}
    .muted{color:var(--muted)}
    .grid{display:grid;gap:16px}
    .kpis{grid-template-columns:repeat(4,1fr)}
    .card{background:var(--box);border:1px solid var(--border);border-radius:12px;padding:14px}
    .kpi .label{font-size:12px;color:var(--muted)}
    .kpi .value{font-size:22px;font-weight:700;margin-top:4px}
    .kpi .delta{font-size:12px;margin-top:4px}
    .up{color:var(--accent)} .down{color:var(--danger)}
    .twocol{grid-template-columns:1.1fr .9fr}
    .chart-card{padding:16px}
    .legend{display:flex;gap:10px;flex-wrap:wrap;margin-top:8px}
    .legend .item{display:flex;align-items:center;gap:6px;font-size:12px;color:var(--muted)}
    .dot{width:10px;height:10px;border-radius:50%}
    table{width:100%;border-collapse:collapse;margin-top:8px;font-size:12px}
    th,td{padding:8px 10px;border-bottom:1px solid var(--border);text-align:left}
    th{background:#fafafa}
    tfoot td{font-weight:700}
    .section{margin-top:18px}
    .note{font-size:12px;color:var(--muted)}
    .footer{position:fixed;bottom:12px;left:0;right:0;text-align:center;font-size:11px;color:var(--muted)}
    /* Print tweaks */
    @page{size:A4;margin:16mm}
    .page-break{page-break-after:always}
    .no-break{page-break-inside:avoid}
  </style>
</head>
<body>
  <div class="container">
    <!-- Cover -->
    <section class="cover no-break">
      <div class="brand">Acme Cloud • FinOps</div>
      <h1>Monthly Cloud Cost Report</h1>
      <p class="muted">Period: July 1–31, 2025 • Owner: Platform Engineering</p>
      <p>Summary of cloud spend, usage efficiency, and optimization recommendations across AWS and Azure. This document is intended for engineering leads, finance partners, and product owners.</p>
    </section>

    <!-- KPI Cards -->
    <section class="section no-break">
      <h2>Key Metrics</h2>
      <div class="grid kpis">
        <div class="card kpi">
          <div class="label">Total Spend</div>
          <div class="value">$124,380</div>
          <div class="delta down">▲ 6.2% vs Jun</div>
        </div>
        <div class="card kpi">
          <div class="label">Cost per Active User</div>
          <div class="value">$1.42</div>
          <div class="delta up">▼ 3.5% vs Jun</div>
        </div>
        <div class="card kpi">
          <div class="label">Savings Realized</div>
          <div class="value">$9,840</div>
          <div class="delta up">+ Committed use</div>
        </div>
        <div class="card kpi">
          <div class="label">Waste (Idle/Orphaned)</div>
          <div class="value">$6,210</div>
          <div class="delta down">▲ Action required</div>
        </div>
      </div>
      <p class="note">Savings include RI/Savings Plans utilization and right-sizing actions performed in July.</p>
    </section>

    <!-- Charts Row -->
    <section class="section grid twocol no-break">
      <!-- Bar Chart: Cost by Service -->
      <div class="card chart-card">
        <h3>Cost by Service (Top 6)</h3>
        <svg id="barChart" width="100%" height="260" viewBox="0 0 520 260" preserveAspectRatio="xMidYMid meet" role="img" aria-label="Bar chart: cost by service"></svg>
        <div class="legend">
          <div class="item"><span class="dot" style="background:#2563eb"></span>Compute</div>
          <div class="item"><span class="dot" style="background:#10b981"></span>Database</div>
          <div class="item"><span class="dot" style="background:#f59e0b"></span>Storage</div>
          <div class="item"><span class="dot" style="background:#ef4444"></span>Networking</div>
          <div class="item"><span class="dot" style="background:#a855f7"></span>Analytics</div>
          <div class="item"><span class="dot" style="background:#0ea5e9"></span>Other</div>
        </div>
      </div>

      <!-- Donut Chart: Allocation by Environment -->
      <div class="card chart-card">
        <h3>Allocation by Environment</h3>
        <svg id="donutChart" width="100%" height="260" viewBox="0 0 260 260" preserveAspectRatio="xMidYMid meet" role="img" aria-label="Donut chart: allocation by environment"></svg>
        <div class="legend">
          <div class="item"><span class="dot" style="background:#2563eb"></span>Production (54%)</div>
          <div class="item"><span class="dot" style="background:#f59e0b"></span>Staging (18%)</div>
          <div class="item"><span class="dot" style="background:#10b981"></span>Development (22%)</div>
          <div class="item"><span class="dot" style="background:#ef4444"></span>Sandbox (6%)</div>
        </div>
      </div>
    </section>

    <!-- Line Chart: Monthly Trend -->
    <section class="section no-break">
      <div class="card chart-card">
        <h3>12‑Month Spend Trend</h3>
        <svg id="lineChart" width="100%" height="280" viewBox="0 0 560 280" preserveAspectRatio="xMidYMid meet" role="img" aria-label="Line chart: monthly spend trend"></svg>
        <p class="note">Trend shows gradual growth with seasonal peaks. July uptick driven by analytics workloads and increased egress.</p>
      </div>
    </section>

    <!-- Top Spenders Table -->
    <section class="section">
      <h2>Top Cost Drivers</h2>
      <div class="card">
        <table>
          <thead>
            <tr>
              <th>Owner</th>
              <th>Service</th>
              <th>Env</th>
              <th>Region</th>
              <th>Monthly Cost</th>
              <th>Change</th>
              <th>Notes</th>
            </tr>
          </thead>
          <tbody>
            <tr>
              <td>Search Team</td>
              <td>AKS / EKS Nodes</td>
              <td>Prod</td>
              <td>EU-West</td>
              <td>$28,900</td>
              <td>+9%</td>
              <td>New blue/green capacity during migration</td>
            </tr>
            <tr>
              <td>Data Platform</td>
              <td>Managed PostgreSQL</td>
              <td>Prod</td>
              <td>US-East</td>
              <td>$17,120</td>
              <td>+3%</td>
              <td>Storage growth + PITR retention</td>
            </tr>
            <tr>
              <td>ML Ops</td>
              <td>GPU Compute</td>
              <td>Staging</td>
              <td>US-West</td>
              <td>$12,480</td>
              <td>-6%</td>
              <td>Improved scheduling, better utilization</td>
            </tr>
            <tr>
              <td>Core Platform</td>
              <td>Object Storage</td>
              <td>Prod</td>
              <td>EU-Central</td>
              <td>$11,030</td>
              <td>+12%</td>
              <td>Egress for reporting workloads</td>
            </tr>
            <tr>
              <td>Web Experience</td>
              <td>CDN / Edge</td>
              <td>Prod</td>
              <td>Global</td>
              <td>$8,640</td>
              <td>+2%</td>
              <td>Traffic growth</td>
            </tr>
          </tbody>
          <tfoot>
            <tr>
              <td colspan="7">Subtotal (Top 5): $78,170 • 62.8% of total spend</td>
            </tr>
          </tfoot>
        </table>
      </div>
    </section>

    <!-- Recommendations -->
    <section class="section">
      <h2>Recommendations</h2>
      <div class="card">
        <ul>
          <li><strong>Right-size compute:</strong> Target 14 underutilized node pools (avg CPU &lt; 20%). Est. save $2,100/mo.</li>
          <li><strong>Commitment discounts:</strong> Increase Savings Plans coverage from 62% → 80% for prod compute. Est. save $3,400/mo.</li>
          <li><strong>Storage lifecycle:</strong> Apply 30/60/90 day policies for cold objects; review PITR window on Postgres. Est. save $1,150/mo.</li>
          <li><strong>Shut idle:</strong> Auto-suspend 9 dev clusters overnight/weekends. Est. save $900/mo.</li>
        </ul>
      </div>
    </section>

    <div class="footer">Acme Cloud FinOps • Generated for demonstration</div>
  </div>

  <script>
    // --- Simple SVG chart helpers (no external libs) ---
    function renderBarChart(id, labels, values, colors){
      const svg = document.getElementById(id);
      const W = 520, H = 220, PAD = 36;
      const max = Math.max(...values) * 1.15;
      // axes
      const axis = document.createElementNS('http://www.w3.org/2000/svg','path');
      axis.setAttribute('d', `M ${PAD} ${H-PAD} H ${W-PAD} M ${PAD} ${H-PAD} V ${PAD}`);
      axis.setAttribute('stroke', '#cbd5e1'); axis.setAttribute('fill','none');
      svg.appendChild(axis);
      const barW = (W - PAD*2) / values.length * 0.6;
      values.forEach((v,i)=>{
        const x = PAD + (i+0.2)*(W-PAD*2)/values.length;
        const h = (v/max)*(H-PAD*2);
        const y = (H-PAD) - h;
        const rect = document.createElementNS('http://www.w3.org/2000/svg','rect');
        rect.setAttribute('x', x);
        rect.setAttribute('y', y);
        rect.setAttribute('width', barW);
        rect.setAttribute('height', h);
        rect.setAttribute('fill', colors[i%colors.length]);
        svg.appendChild(rect);
        // label
        const t = document.createElementNS('http://www.w3.org/2000/svg','text');
        t.setAttribute('x', x + barW/2);
        t.setAttribute('y', H-10);
        t.setAttribute('text-anchor','middle');
        t.setAttribute('font-size','10');
        t.setAttribute('fill','#6b7280');
        t.textContent = labels[i];
        svg.appendChild(t);
      });
    }

    function renderDonutChart(id, parts, colors){
      const svg = document.getElementById(id);
      const cx=130, cy=130, r=90, thick=26;
      const total = parts.reduce((a,b)=>a+b,0);
      let start = -Math.PI/2;
      parts.forEach((v,i)=>{
        const angle = (v/total)*Math.PI*2;
        const end = start + angle;
        const large = angle>Math.PI ? 1 : 0;
        const x1 = cx + r*Math.cos(start), y1 = cy + r*Math.sin(start);
        const x2 = cx + r*Math.cos(end),   y2 = cy + r*Math.sin(end);
        const x3 = cx + (r-thick)*Math.cos(end), y3 = cy + (r-thick)*Math.sin(end);
        const x4 = cx + (r-thick)*Math.cos(start), y4 = cy + (r-thick)*Math.sin(start);
        const path = document.createElementNS('http://www.w3.org/2000/svg','path');
        const d = [
          `M ${x1} ${y1}`,
          `A ${r} ${r} 0 ${large} 1 ${x2} ${y2}`,
          `L ${x3} ${y3}`,
          `A ${r-thick} ${r-thick} 0 ${large} 0 ${x4} ${y4}`,
          'Z'
        ].join(' ');
        path.setAttribute('d', d);
        path.setAttribute('fill', colors[i%colors.length]);
        svg.appendChild(path);
        start = end;
      });
      // Center label
      const center = document.createElementNS('http://www.w3.org/2000/svg','text');
      center.setAttribute('x', cx); center.setAttribute('y', cy+4);
      center.setAttribute('text-anchor','middle'); center.setAttribute('font-size','16'); center.setAttribute('font-weight','700');
      center.textContent = 'Env Mix';
      svg.appendChild(center);
    }

    function renderLineChart(id, labels, values){
      const svg = document.getElementById(id);
      const W=560,H=260,PAD=36;
      const max = Math.max(...values)*1.2;
      // axes
      const axis = document.createElementNS('http://www.w3.org/2000/svg','path');
      axis.setAttribute('d', `M ${PAD} ${H-PAD} H ${W-PAD} M ${PAD} ${H-PAD} V ${PAD}`);
      axis.setAttribute('stroke', '#cbd5e1'); axis.setAttribute('fill','none');
      svg.appendChild(axis);
      // polyline
      const pts = values.map((v,i)=>{
        const x = PAD + i*(W-PAD*2)/(values.length-1);
        const y = (H-PAD) - (v/max)*(H-PAD*2);
        return `${x},${y}`;
      }).join(' ');
      const pl = document.createElementNS('http://www.w3.org/2000/svg','polyline');
      pl.setAttribute('points', pts);
      pl.setAttribute('fill','none'); pl.setAttribute('stroke','#2563eb'); pl.setAttribute('stroke-width','2.5');
      svg.appendChild(pl);
      // dots
      pts.split(' ').forEach(p=>{
        const [x,y] = p.split(',').map(Number);
        const c = document.createElementNS('http://www.w3.org/2000/svg','circle');
        c.setAttribute('cx',x); c.setAttribute('cy',y); c.setAttribute('r',3.2); c.setAttribute('fill','#2563eb');
        svg.appendChild(c);
      });
    }

    // --- Sample data & render ---
    renderBarChart('barChart',
      ['Compute','DB','Storage','Network','Analytics','Other'],
      [48900, 22100, 18300, 12200, 9600, 5280],
      ['#2563eb','#10b981','#f59e0b','#ef4444','#a855f7','#0ea5e9']
    );

    renderDonutChart('donutChart',
      [54,18,22,6],
      ['#2563eb','#f59e0b','#10b981','#ef4444']
    );

    renderLineChart('lineChart',
      ['Aug','Sep','Oct','Nov','Dec','Jan','Feb','Mar','Apr','May','Jun','Jul'],
      [91800, 94000, 96500, 98200, 100400, 102100, 105300, 108700, 112200, 116900, 117100, 124380]
    );
  </script>
</body>
</html>
