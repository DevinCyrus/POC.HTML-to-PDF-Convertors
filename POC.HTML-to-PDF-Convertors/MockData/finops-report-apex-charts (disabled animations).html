<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>FinOps Monthly Cost Report</title>
  <script src="https://cdn.jsdelivr.net/npm/apexcharts"></script>
  <style>
    :root{
      --bg:#ffffff;
      --ink:#1f2937;
      --muted:#6b7280;
      --brand:#2563eb;
      --accent:#10b981;
      --warn:#f59e0b;
      --danger:#ef4444;
      --box:#f3f4f6;
      --border:#e5e7eb;
    }
    *{box-sizing:border-box;}
    html,body{margin:0;padding:0;background:var(--bg);color:var(--ink);font:14px/1.5 Inter,Roboto,Arial,sans-serif;}
    h1,h2,h3{margin:0 0 .35rem 0;line-height:1.3}
    h1{font-size:28px}
    h2{font-size:20px;margin-top:1.25rem}
    h3{font-size:16px;margin-top:1rem}
    p{margin:.5rem 0;color:var(--ink)}
    .container{max-width:960px;margin:0 auto;padding:28px 28px 48px}
    .cover{padding:48px 0;border-bottom:1px solid var(--border)}
    .brand{font-weight:700;color:var(--brand)}
    .muted{color:var(--muted)}
    .grid{display:grid;gap:16px}
    .kpis{grid-template-columns:repeat(4,1fr)}
    .card{background:var(--box);border:1px solid var(--border);border-radius:12px;padding:14px}
    .kpi .label{font-size:12px;color:var(--muted)}
    .kpi .value{font-size:22px;font-weight:700;margin-top:4px}
    .kpi .delta{font-size:12px;margin-top:4px}
    .up{color:var(--accent)} .down{color:var(--danger)}
    .twocol{grid-template-columns:1.1fr .9fr}
    .chart-card{padding:16px}
    .legend{display:flex;gap:10px;flex-wrap:wrap;margin-top:8px}
    .legend .item{display:flex;align-items:center;gap:6px;font-size:12px;color:var(--muted)}
    .dot{width:10px;height:10px;border-radius:50%}
    table{width:100%;border-collapse:collapse;margin-top:8px;font-size:12px}
    th,td{padding:8px 10px;border-bottom:1px solid var(--border);text-align:left}
    th{background:#fafafa}
    tfoot td{font-weight:700}
    .section{margin-top:24px}
    .note{font-size:12px;color:var(--muted)}
    .footer{position:fixed;bottom:12px;left:0;right:0;text-align:center;font-size:11px;color:var(--muted)}
    @page{size:A4;margin:16mm}
    .page-break{page-break-after:always}
    .no-break{page-break-inside:avoid}
  </style>
</head>
<body>
  <div class="container">
    <!-- Cover -->
    <section class="cover no-break">
      <div class="brand">Acme Cloud • FinOps</div>
      <h1>Monthly Cloud Cost Report</h1>
      <p class="muted">Period: July 1–31, 2025 • Audience: Engineering & Finance</p>
      <p>This report provides a detailed breakdown of cloud spending, efficiency gains, and anomalies for July 2025. It compares trends against the prior period and offers recommendations for cost optimization and future planning.</p>
    </section>

    <!-- KPI Cards -->
    <section class="section no-break">
      <h2>Key Metrics</h2>
      <div class="grid kpis">
        <div class="card kpi">
          <div class="label">Total Spend</div>
          <div class="value">$124,380</div>
          <div class="delta down">▲ 6.2% vs Jun</div>
        </div>
        <div class="card kpi">
          <div class="label">Cost per Active User</div>
          <div class="value">$1.42</div>
          <div class="delta up">▼ 3.5% vs Jun</div>
        </div>
        <div class="card kpi">
          <div class="label">Savings Realized</div>
          <div class="value">$9,840</div>
          <div class="delta up">+ Committed use</div>
        </div>
        <div class="card kpi">
          <div class="label">Waste (Idle/Orphaned)</div>
          <div class="value">$6,210</div>
          <div class="delta down">▲ Action required</div>
        </div>
      </div>
      <p class="note">Savings driven by reserved instances and rightsizing. Waste primarily in dev/test workloads.</p>
    </section>

    <!-- Charts Row -->
    <section class="section grid twocol no-break">
      <!-- Apex Bar Chart -->
      <div class="card chart-card">
        <h3>Cost by Service</h3>
        <div id="apexBar"></div>
      </div>

      <!-- Apex Donut Chart -->
      <div class="card chart-card">
        <h3>Allocation by Environment</h3>
        <div id="apexDonut"></div>
      </div>
    </section>

    <!-- Line Chart -->
    <section class="section no-break">
      <div class="card chart-card">
        <h3>12-Month Spend Trend</h3>
        <div id="apexLine"></div>
        <p class="note">Spend increased steadily, with July’s uptick tied to analytics workloads and higher data egress. Trend suggests further increases into Q4 unless capped.</p>
      </div>
    </section>

    <!-- Top Spenders -->
    <section class="section">
      <h2>Top Cost Drivers</h2>
      <div class="card">
        <table>
          <thead>
            <tr>
              <th>Owner</th><th>Service</th><th>Env</th><th>Region</th><th>Monthly Cost</th><th>Change</th><th>Notes</th>
            </tr>
          </thead>
          <tbody>
            <tr><td>Search Team</td><td>Kubernetes Nodes</td><td>Prod</td><td>EU-West</td><td>$28,900</td><td>+9%</td><td>Blue/green migration</td></tr>
            <tr><td>Data Platform</td><td>Managed PostgreSQL</td><td>Prod</td><td>US-East</td><td>$17,120</td><td>+3%</td><td>Storage + PITR retention</td></tr>
            <tr><td>ML Ops</td><td>GPU Compute</td><td>Staging</td><td>US-West</td><td>$12,480</td><td>-6%</td><td>Better scheduling</td></tr>
            <tr><td>Core Platform</td><td>Object Storage</td><td>Prod</td><td>EU-Central</td><td>$11,030</td><td>+12%</td><td>Egress for reports</td></tr>
            <tr><td>Web Experience</td><td>CDN / Edge</td><td>Global</td><td>$8,640</td><td>+2%</td><td>Traffic growth</td></tr>
          </tbody>
          <tfoot>
            <tr><td colspan="7">Subtotal (Top 5): $78,170 • 62.8% of total spend</td></tr>
          </tfoot>
        </table>
      </div>
    </section>

    <!-- Interpretation -->
    <section class="section">
      <h2>Analysis & Insights</h2>
      <div class="card">
        <p><strong>Anomalies:</strong> Core Platform storage costs rose 12% due to heavy report egress. Search team overspend tied to temporary blue/green deployment.</p>
        <p><strong>Comparisons:</strong> Spend is up 6.2% month-over-month, but cost per user decreased, indicating efficiency gains despite higher absolute spend.</p>
        <p><strong>Projection:</strong> If current trends persist, Q4 spend could exceed $400k. Proactive rightsizing and storage lifecycle policies are critical to avoid overrun.</p>
      </div>
    </section>

    <!-- Recommendations -->
    <section class="section">
      <h2>Recommendations</h2>
      <div class="card">
        <ul>
          <li>Right-size 14 underutilized node pools (CPU <20%). Est. save $2,100/mo.</li>
          <li>Increase Savings Plans coverage (62% → 80%). Est. save $3,400/mo.</li>
          <li>Apply storage lifecycle policies (30/60/90 days). Est. save $1,150/mo.</li>
          <li>Auto-suspend 9 dev clusters overnight. Est. save $900/mo.</li>
        </ul>
      </div>
    </section>

    <div class="footer">Acme Cloud FinOps • Generated Demo Report</div>
  </div>

  <script>
    // --- ApexCharts Configurations (animations disabled) ---
    new ApexCharts(document.querySelector("#apexBar"), {
      chart: { type: 'bar', height: 260, animations: { enabled: false } },
      series: [{ name: 'Cost ($)', data: [48900, 22100, 18300, 12200, 9600, 5280] }],
      xaxis: { categories: ['Compute','Database','Storage','Network','Analytics','Other'] },
      plotOptions: {
        bar: { distributed: true, dataLabels: { position: 'center' } }
      },
      dataLabels: {
        enabled: true,
        style: { colors: ['#000'] },
        textAnchor: 'middle'
      },
      colors: ['#2563eb','#10b981','#f59e0b','#ef4444','#a855f7','#0ea5e9']
    }).render();

    new ApexCharts(document.querySelector("#apexDonut"), {
      chart: { type: 'donut', height: 260, animations: { enabled: false } },
      series: [54,18,22,6],
      labels: ['Production','Staging','Development','Sandbox'],
      colors: ['#2563eb','#f59e0b','#10b981','#ef4444'],
      legend: { position: 'bottom' }
    }).render();

    new ApexCharts(document.querySelector("#apexLine"), {
      chart: { type: 'line', height: 280, animations: { enabled: false } },
      series: [{ name: 'Spend ($)', data: [91800,94000,96500,98200,100400,102100,105300,108700,112200,116900,117100,124380] }],
      xaxis: { categories: ['Aug','Sep','Oct','Nov','Dec','Jan','Feb','Mar','Apr','May','Jun','Jul'] },
      colors: ['#2563eb']
    }).render();
  </script>
</body>
</html>
